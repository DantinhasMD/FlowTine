import{c as M,d as C,M as D,E as T,f as g,H as j,O as c,g as d,h as t,t as u,i as z,F as m,m as p,K as S,z as q,A as B,P as N,j as V,k as A,L as b,l as H,v as i}from"./index-D3YScLgM.js";import{l as L}from"./index-CNSRsbbU.js";const E=M("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),I={class:"h-full flex flex-col"},K={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},F={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},O={class:"flex-1 overflow-y-auto p-6 space-y-4"},P={class:"text-sm"},Q={class:"text-xs opacity-70 mt-1"},R={key:0,class:"flex justify-start animate-fade-in"},U={class:"p-4 border-t border-gray-200 dark:border-gray-700"},Z={class:"flex flex-wrap gap-2 mb-4"},$=["onClick"],G={class:"p-6 border-t border-gray-200 dark:border-gray-700"},J={class:"flex items-center space-x-2"},W=["disabled"],X=["disabled"],se=C({__name:"ChatView",setup(Y){const a=D(),r=T(""),x=g(()=>a.messages),n=g(()=>a.isTyping),f=g(()=>{const e=a.organizationMethods[a.currentMethod];return(e==null?void 0:e.name)||"Não definido"}),h=[{text:"Como posso melhorar minha produtividade?"},{text:"Estou me sentindo sobrecarregado"},{text:"Ajuda com priorização"},{text:"Dicas do método atual"},{text:"Mudança de método"}],y=async()=>{const e=r.value.trim();if(!e||n.value)return;a.addMessage(e,"user"),r.value="";const o=await a.getBotResponse(e);a.addMessage(o,"bot"),await c(),l()},v=async e=>{a.addMessage(e,"user");const o=await a.getBotResponse(e);a.addMessage(o,"bot"),await c(),l()},k=async()=>{const e=a.getDailyQuestion();a.addMessage(e,"bot"),await c(),l()},_=()=>{confirm("Tem certeza que deseja limpar o histórico do chat?")&&a.clearMessages()},w=e=>H(new Date(e),"HH:mm",{locale:L}),l=()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)};return j(()=>{a.loadMessages(),c(()=>l())}),(e,o)=>(i(),d("div",I,[t("div",K,[t("div",null,[o[1]||(o[1]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Assistente Organizacional",-1)),t("p",F," Método atual: "+u(f.value),1)]),t("div",{class:"flex items-center gap-2"},[t("button",{onClick:k,class:"px-3 py-2 text-sm font-medium text-primary-600 bg-primary-50 rounded-md hover:bg-primary-100 dark:bg-primary-900/20 dark:text-primary-400 dark:hover:bg-primary-900/30"}," Pergunta do Dia "),t("button",{onClick:_,class:"px-3 py-2 text-sm font-medium text-gray-600 bg-gray-50 rounded-md hover:bg-gray-100 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"}," Limpar Chat ")])]),t("div",O,[(i(!0),d(m,null,p(x.value,s=>(i(),d("div",{key:s.id,class:b([{"flex justify-end":s.type==="user","flex justify-start":s.type==="bot"},"animate-fade-in"])},[t("div",{class:b([{"bg-primary-600 text-white":s.type==="user","bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white":s.type==="bot"},"max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow-sm"])},[t("p",P,u(s.content),1),t("p",Q,u(w(s.timestamp)),1)],2)],2))),128)),n.value?(i(),d("div",R,o[2]||(o[2]=[S('<div class="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg shadow-sm"><div class="flex items-center space-x-1"><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;"></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;"></div></div></div>',1)]))):z("",!0)]),t("div",U,[t("div",Z,[(i(),d(m,null,p(h,s=>t("button",{key:s.text,onClick:ee=>v(s.text),class:"px-3 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded-full hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 transition-colors"},u(s.text),9,$)),64))])]),t("div",G,[t("div",J,[q(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),onKeyup:N(y,["enter"]),disabled:n.value,type:"text",placeholder:"Digite sua mensagem...",class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,40,W),[[B,r.value]]),t("button",{onClick:y,disabled:!r.value.trim()||n.value,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},[V(A(E),{class:"w-4 h-4"})],8,X)])])]))}});export{se as default};
