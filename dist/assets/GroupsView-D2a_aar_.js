import{d as S,a as j,E as _,g,h as e,i as v,D as E,z as T,A as G,p as x,t as d,v as i,H as I,f as C,j as k,F as A,m as B,k as m,X as D,U as M,o as q}from"./index-D3YScLgM.js";import{_ as P}from"./TaskCard.vue_vue_type_script_setup_true_lang-DhkOmjRl.js";import"./clock-KQDScBOl.js";import"./index-CNSRsbbU.js";const H={class:"flex items-center gap-2"},L=S({__name:"GroupForm",emits:["group-created"],setup(N,{emit:o}){const l=j(),a=_(""),u=_("#6366f1"),y=o,f=()=>{if(!a.value.trim()){alert("Por favor, insira um nome para o grupo.");return}l.addTaskGroup({name:a.value.trim(),color:u.value}),a.value="",u.value="#6366f1",y("group-created")};return(h,n)=>(i(),g("div",null,[e("form",{onSubmit:E(f,["prevent"]),class:"space-y-2 mb-4"},[e("div",null,[n[2]||(n[2]=e("label",{for:"groupName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nome do Grupo",-1)),T(e("input",{id:"groupName","onUpdate:modelValue":n[0]||(n[0]=b=>a.value=b),required:"",type:"text",placeholder:"Ex: Finanças",class:"w-full px-2.5 py-1.5 border border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm"},null,512),[[G,a.value]])]),e("div",H,[n[3]||(n[3]=e("label",{for:"groupColor",class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Cor",-1)),T(e("input",{id:"groupColor","onUpdate:modelValue":n[1]||(n[1]=b=>u.value=b),type:"color",class:"w-8 h-8 p-0 border border-gray-300 rounded-md overflow-hidden cursor-pointer dark:border-gray-600"},null,512),[[G,u.value]])]),n[4]||(n[4]=e("div",{class:"flex justify-end pt-1"},[e("button",{type:"submit",class:"px-3 py-1.5 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 text-sm"}," Criar Grupo ")],-1))],32),a.value.length>0?(i(),g("div",{key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-3 flex flex-col items-center justify-center transition-all duration-200",style:x({borderColor:u.value,borderWidth:"2px",borderStyle:"solid"})},[e("h4",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-1",style:x({color:u.value})},d(a.value),5),e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:x({backgroundColor:u.value+"33",color:u.value})},d(a.value),5)],4)):v("",!0)]))}}),W={class:"space-y-6"},X={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},K={class:"flex items-center justify-between mb-4"},O={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300"},Q={class:"space-y-2 mb-4"},R={class:"flex justify-between text-sm"},Y={class:"font-medium text-gray-900 dark:text-white"},Z={class:"flex justify-between text-sm"},ee={class:"font-medium text-yellow-600 dark:text-yellow-400"},te={class:"flex justify-between text-sm"},re={class:"font-medium text-green-600 dark:text-green-400"},se={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4"},ae={class:"flex gap-2"},oe=["onClick"],de=["onClick"],ne={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow"},le={class:"flex items-center justify-between mb-4"},ie={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"},ue={class:"space-y-2 mb-4"},ge={class:"flex justify-between text-sm"},ce={class:"font-medium text-gray-900 dark:text-white"},ye={class:"flex justify-between text-sm"},me={class:"font-medium text-yellow-600 dark:text-yellow-400"},pe={class:"flex justify-between text-sm"},xe={class:"font-medium text-green-600 dark:text-green-400"},fe={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-4"},be={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},ke={class:"p-6 border-b border-gray-200 dark:border-gray-700"},ve={class:"flex items-center justify-between"},he={class:"text-lg font-semibold text-gray-900 dark:text-white"},we={class:"p-6"},_e={key:0,class:"text-center py-8"},Te={key:1,class:"space-y-4"},De=S({__name:"GroupsView",setup(N){const o=j(),l=_(null);I(()=>{o.loadTasks()});const a=C(()=>o.tasks.filter(s=>!s.groupId)),u=C(()=>{if(!l.value)return[];let s=[];l.value==="unassigned"?s=a.value:s=o.getTasksByGroup(l.value);const t=s.filter(r=>r.status!=="done"),p=s.filter(r=>r.status==="done");return t.sort((r,c)=>{const w=r.updatedAt?new Date(r.updatedAt).getTime():new Date(r.createdAt).getTime();return(c.updatedAt?new Date(c.updatedAt).getTime():new Date(c.createdAt).getTime())-w}),p.sort((r,c)=>{const w=r.updatedAt?new Date(r.updatedAt).getTime():new Date(r.createdAt).getTime();return(c.updatedAt?new Date(c.updatedAt).getTime():new Date(c.createdAt).getTime())-w}),[...t,...p]}),y=s=>o.getTasksByGroup(s),f=(s,t)=>o.getTasksByStatus(s,t),h=s=>{if(s.length===0)return 0;const t=s.filter(p=>p.status==="done").length;return Math.round(t/s.length*100)},n=s=>{l.value=s},b=(s,t)=>{o.updateTask(s,{status:t})},$=s=>{confirm("Tem certeza que deseja excluir esta tarefa?")&&o.deleteTask(s)},z=()=>{console.log("Novo grupo criado!")},F=s=>["personal","professional","study","leisure","domestic"].includes(s),V=s=>{confirm("Tem certeza que deseja excluir este grupo? As tarefas associadas a ele ficarão sem grupo.")&&(o.deleteTaskGroup(s),l.value===s&&(l.value=null))};return(s,t)=>{var p;return i(),g("div",W,[t[11]||(t[11]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Grupos",-1)),e("div",X,[t[2]||(t[2]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Criar Novo Grupo",-1)),k(L,{onGroupCreated:z})]),e("div",J,[(i(!0),g(A,null,B(m(o).taskGroups,r=>(i(),g("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow"},[e("div",K,[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white",style:x({color:r.color})},d(r.name),5),e("span",O,d(y(r.id).length)+" tarefa"+d(y(r.id).length!==1?"s":""),1)]),e("div",Q,[e("div",R,[t[3]||(t[3]=e("span",{class:"text-gray-500 dark:text-gray-400"},"A Fazer",-1)),e("span",Y,d(f(y(r.id),"todo").length),1)]),e("div",Z,[t[4]||(t[4]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Fazendo",-1)),e("span",ee,d(f(y(r.id),"doing").length),1)]),e("div",te,[t[5]||(t[5]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Concluídas",-1)),e("span",re,d(f(y(r.id),"done").length),1)])]),e("div",se,[e("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:x({width:`${h(y(r.id))}%`,backgroundColor:r.color})},null,4)]),e("div",ae,[e("button",{onClick:c=>n(r.id),class:"flex-1 text-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Ver Tarefas ",8,oe),F(r.id)?v("",!0):(i(),g("button",{key:0,onClick:c=>V(r.id),class:"p-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900 transition-colors",title:"Excluir Grupo"},[k(m(D),{class:"w-5 h-5 text-red-500"})],8,de))])]))),128)),a.value.length>0||l.value==="unassigned"?(i(),g("div",ne,[e("div",le,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Sem Grupo ",-1)),e("span",ie,d(a.value.length)+" tarefa"+d(a.value.length!==1?"s":""),1)]),e("div",ue,[e("div",ge,[t[7]||(t[7]=e("span",{class:"text-gray-500 dark:text-gray-400"},"A Fazer",-1)),e("span",ce,d(m(o).getTasksByStatus(a.value,"todo").length),1)]),e("div",ye,[t[8]||(t[8]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Fazendo",-1)),e("span",me,d(m(o).getTasksByStatus(a.value,"doing").length),1)]),e("div",pe,[t[9]||(t[9]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Concluídas",-1)),e("span",xe,d(m(o).getTasksByStatus(a.value,"done").length),1)])]),e("div",fe,[e("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:x({width:`${h(a.value)}%`})},null,4)]),e("button",{onClick:t[0]||(t[0]=r=>n("unassigned")),class:"w-full text-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Ver Tarefas ")])):v("",!0)]),l.value?(i(),g("div",be,[e("div",ke,[e("div",ve,[e("h2",he," Tarefas do Grupo: "+d(((p=m(o).getGroupById(l.value))==null?void 0:p.name)||"Carregando..."),1),e("button",{onClick:t[1]||(t[1]=r=>l.value=null),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[k(m(D),{class:"w-5 h-5"})])])]),e("div",we,[u.value.length===0?(i(),g("div",_e,[k(m(M),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t[10]||(t[10]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Nenhuma tarefa neste grupo ainda ",-1))])):(i(),g("div",Te,[(i(!0),g(A,null,B(u.value,r=>(i(),q(P,{key:r.id,task:r,onUpdateStatus:b,onDelete:$},null,8,["task"]))),128))]))])])):v("",!0)])}}});export{De as default};
